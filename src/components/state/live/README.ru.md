# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Live

–ú–æ—â–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–æ—Å–æ–º, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–∞—à–±–æ—Ä–¥–æ–≤, —Å–∏—Å—Ç–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∂–∏–≤—ã—Ö –ª–µ–Ω—Ç –∏ –ª—é–±—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Live` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—Ä–æ—Å. –û–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤, —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—à–∏–±–æ–∫, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- üìä **–î–∞—à–±–æ—Ä–¥—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏**: –ñ–∏–≤—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥–∞–Ω–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- üîÑ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ UI —Å –¥–∞–Ω–Ω—ã–º–∏ backend
- üìà **–ñ–∏–≤–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è/—Ñ–∏–Ω–∞–Ω—Å—ã**: –¶–µ–Ω—ã –∞–∫—Ü–∏–π, –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç, —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- üåê **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞**: –ó–¥–æ—Ä–æ–≤—å–µ API, —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞, –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- üì± **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ª–µ–Ω—Ç—ã**: –ñ–∏–≤—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –ø–æ—Ç–æ–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üéÆ **–ò–≥—Ä—ã**: –ñ–∏–≤—ã–µ —Å—á–µ—Ç–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤, —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
- üîß **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: –ñ–∏–≤—ã–µ –ª–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **–ü–∞—Ç—Ç–µ—Ä–Ω –æ–ø—Ä–æ—Å–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
- **–ü–∞—Ç—Ç–µ—Ä–Ω render props**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∂–∏–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**: –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∏ –æ—à–∏–±–æ–∫
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript —Å –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏

## TypeScript —Ç–∏–ø—ã
```typescript
import { RenderProp } from '../shared/types';

/**
 * –ü—Ä–æ–ø—Å—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Live
 */
interface LiveProps<T = any> {
  /** –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Ç–µ–∫—É—â–µ–µ –∂–∏–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ) */
  source: () => T | Promise<T>;

  /** –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö */
  interval?: number;

  /** –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ */
  initial?: T;

  /** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–∏ –Ω–∞—á–∏–Ω–∞—Ç—å –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ */
  autoStart?: boolean;

  /** –§—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è */
  compare?: (prev: T, next: T) => boolean;

  /** Render prop, –ø–æ–ª—É—á–∞—é—â–∏–π –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∂–∏–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */
  children: RenderProp<LiveState<T>>;
}

/**
 * –ü–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ–µ render prop
 */
interface LiveState<T = any> {
  /** –¢–µ–∫—É—â–µ–µ –∂–∏–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ */
  value: T | undefined;

  /** –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è */
  previousValue: T | undefined;

  /** –ò–¥—ë—Ç –ª–∏ —Å–µ–π—á–∞—Å –∑–∞–≥—Ä—É–∑–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö */
  isLoading: boolean;

  /** –ê–∫—Ç–∏–≤–Ω—ã –ª–∏ –∂–∏–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è */
  isLive: boolean;

  /** –û—à–∏–±–∫–∞ –æ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ source */
  error: Error | null;

  /** –ó–∞–ø—É—Å—Ç–∏—Ç—å –∂–∏–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è */
  start: () => void;

  /** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∂–∏–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è */
  stop: () => void;

  /** –û–±–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ */
  refresh: () => Promise<void>;

  /** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π */
  updateCount: number;

  /** –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è */
  lastUpdate: Date | null;
}

/** –¢–∏–ø render prop */
type RenderProp<T> = (data: T) => React.ReactNode;
```

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API

| –ü—Ä–æ–ø | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------------|----------|
| `source` | `() => T \| Promise<T>` | - | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π.** –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ) |
| `interval` | `number` | `1000` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–ø—Ä–æ—Å–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö |
| `initial` | `T` | `undefined` | –ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ |
| `autoStart` | `boolean` | `true` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–∏ –Ω–∞—á–∏–Ω–∞—Ç—å –æ–ø—Ä–æ—Å –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| `compare` | `(prev: T, next: T) => boolean` | `undefined` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö |
| `children` | `RenderProp<LiveState<T>>` | - | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π.** Render prop, –ø–æ–ª—É—á–∞—é—â–∏–π –∂–∏–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ |

## –ü—Ä–∏–º–µ—Ä—ã

### –ë–∞–∑–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
```tsx
import { Live } from 'react-utility-kit';

function SystemDashboard() {
  return (
    <Live
      source={() => fetch('/api/system/status').then(r => r.json())}
      interval={5000}
    >
      {({ value, isLive, isLoading, error, start, stop, lastUpdate }) => (
        <div className="dashboard">
          <header>
            <h2>–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
            <div className="status">
              {isLive ? 'üü¢ Live' : 'üî¥ Stop'}
              <button onClick={isLive ? stop : start}>
                {isLive ? 'Stop' : 'Live'}
              </button>
            </div>
          </header>

          {isLoading && <div className="loading">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...</div>}
          {error && (
<div className="error">
–û—à–∏–±–∫–∞:
{error.message}
</div>
)}

          {value && (
            <div className="metrics">
              <div>
–¶–ü:
{value.cpu}
%
              </div>
              <div>
–ü–∞–º—è—Ç—å:
{value.memory}
%
              </div>
              <div>
–î–∏—Å–∫:
{value.disk}
%
              </div>
              <div>
–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:
{value.uptime}
              </div>
            </div>
          )}

          {lastUpdate && (
            <footer>
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
{lastUpdate.toLocaleTimeString()}
            </footer>
          )}
        </div>
      )}
    </Live>
  );
}
```

### –ñ–∏–≤–æ–π —Ç–∏–∫–µ—Ä –∞–∫—Ü–∏–π
```tsx
import { Live } from 'ui-magic-core';

function StockTicker({ symbol }) {
  return (
    <Live
      source={() => getStockPrice(symbol)}
      interval={2000}
      compare={(prev, next) => prev?.price !== next?.price}
    >
      {({ value, previousValue, isLive, updateCount }) => {
        const priceChange = value && previousValue
          ? value.price - previousValue.price
          : 0;

        return (
          <div className={`stock-ticker ${priceChange >= 0 ? 'up' : 'down'}`}>
            <span className="symbol">{symbol}</span>
            <span className="price">
{value?.price}
{' '}
‚ÇΩ
            </span>
            {priceChange !== 0 && (
              <span className="change">
                {priceChange > 0 ? '+' : ''}
{priceChange.toFixed(2)}
              </span>
            )}
            <span className="indicator">{isLive ? 'üì∂' : 'üìµ'}</span>
            <small>
–û–±–Ω–æ–≤–ª–µ–Ω–∏–π:
{updateCount}
            </small>
          </div>
        );
      }}
    </Live>
  );
}
```

### –õ–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
```tsx
import { Live } from 'ui-magic-core';

function LiveChatFeed({ roomId }) {
  return (
    <Live
      source={() => getLatestMessages(roomId)}
      interval={1000}
      initial={[]}
    >
      {({ value: messages, isLoading, error, refresh, isLive }) => (
        <div className="chat-feed">
          <header>
            <h3>
–ñ–∏–≤–æ–π —á–∞—Ç
{isLive && 'üî¥'}
            </h3>
            <button onClick={refresh} disabled={isLoading}>
              –û–±–Ω–æ–≤–∏—Ç—å
            </button>
          </header>

          <div className="messages">
            {messages?.map(message => (
              <div key={message.id} className="message">
                <strong>
{message.author}
:
                </strong>
{' '}
{message.text}
                <time>{new Date(message.timestamp).toLocaleTimeString()}</time>
              </div>
            ))}
          </div>

          {error && (
            <div className="error">
–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
{error.message}
            </div>
          )}
        </div>
      )}
    </Live>
  );
}
```

### –ñ–∏–≤–æ–π –≤–∏–¥–∂–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```tsx
import { Live } from 'ui-magic-core';

function AnalyticsWidget() {
  return (
    <Live
      source={async () => {
        const [visitors, pageviews, revenue] = await Promise.all([
          fetch('/api/analytics/visitors').then(r => r.json()),
          fetch('/api/analytics/pageviews').then(r => r.json()),
          fetch('/api/analytics/revenue').then(r => r.json()),
        ]);
        return { visitors, pageviews, revenue };
      }}
      interval={10000}
    >
      {({ value, isLoading, error, updateCount, lastUpdate }) => (
        <div className="analytics-widget">
          <h3>–ñ–∏–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>

          {isLoading && <div className="spinner">–ó–∞–≥—Ä—É–∑–∫–∞...</div>}

          {error
? (
            <div className="error">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</div>
          )
: value
? (
            <div className="metrics">
              <div className="metric">
                <label>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏</label>
                <span className="value">{value.visitors}</span>
              </div>
              <div className="metric">
                <label>–ü—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü</label>
                <span className="value">{value.pageviews}</span>
              </div>
              <div className="metric">
                <label>–î–æ—Ö–æ–¥ —Å–µ–≥–æ–¥–Ω—è</label>
                <span className="value">
{value.revenue}
{' '}
‚ÇΩ
                </span>
              </div>
            </div>
          )
: (
            <div>–î–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</div>
          )}

          <footer>
            –û–±–Ω–æ–≤–ª–µ–Ω–∏–π:
{' '}
{updateCount}
{' '}
|
            –ü–æ—Å–ª–µ–¥–Ω–µ–µ:
{' '}
{lastUpdate?.toLocaleTimeString()}
          </footer>
        </div>
      )}
    </Live>
  );
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
```tsx
import { Live } from 'react-utility-kit';

function ServerHealthMonitor({ servers }) {
  return (
    <div className="server-grid">
      {servers.map(server => (
        <Live
          key={server.id}
          source={() => checkServerHealth(server.id)}
          interval={3000}
          autoStart={true}
        >
          {({ value: health, isLoading, error, isLive, start, stop }) => (
            <div className={`server-card ${health?.status || 'unknown'}`}>
              <header>
                <h4>{server.name}</h4>
                <button
                  onClick={isLive ? stop : start}
                  className={isLive ? 'stop' : 'start'}
                >
                  {isLive ? '–°—Ç–æ–ø' : '–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å'}
                </button>
              </header>

              <div className="status">
                <div className={`indicator ${health?.status}`}>
                  {health?.status === 'healthy'
? 'üü¢'
                   : health?.status === 'warning' ? 'üü°' : 'üî¥'}
                </div>
                <span>{health?.status || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</span>
              </div>

              {health && (
                <div className="metrics">
                  <div>
–û—Ç–∫–ª–∏–∫:
{health.responseTime}
–º—Å
                  </div>
                  <div>
–¶–ü:
{health.cpu}
%
                  </div>
                  <div>
–ü–∞–º—è—Ç—å:
{health.memory}
%
                  </div>
                </div>
              )}

              {error && <div className="error">–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å</div>}
              {isLoading && <div className="loading">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>}
            </div>
          )}
        </Live>
      ))}
    </div>
  );
}
```

### –ñ–∏–≤–æ–π –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ –ª–æ–≥–æ–≤
```tsx
import { Live } from 'ui-magic-core';

function LiveLogViewer({ logLevel = 'info' }) {
  return (
    <Live
      source={() => getLogs(logLevel, 50)}
      interval={2000}
      compare={(prev, next) => prev?.length !== next?.length}
    >
      {({ value: logs, isLive, error, stop, start, updateCount }) => (
        <div className="log-viewer">
          <header>
            <h3>
–ñ–∏–≤—ã–µ –ª–æ–≥–∏ (
{logLevel}
)
            </h3>
            <div className="controls">
              <button onClick={isLive ? stop : start}>
                {isLive ? '–ü–∞—É–∑–∞' : '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å'}
              </button>
              <span>
–û–±–Ω–æ–≤–ª–µ–Ω–∏–π:
{updateCount}
              </span>
            </div>
          </header>

          <div className="log-content">
            {logs?.map((log, index) => (
              <div key={index} className={`log-entry ${log.level}`}>
                <time>{new Date(log.timestamp).toLocaleTimeString()}</time>
                <span className="level">
[
{log.level.toUpperCase()}
]
                </span>
                <span className="message">{log.message}</span>
              </div>
            ))}
          </div>

          {error && (
            <div className="error">
–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏:
{error.message}
            </div>
          )}
        </div>
      )}
    </Live>
  );
}
```

## –°–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### üöÄ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- **–£–º–Ω—ã–π –æ–ø—Ä–æ—Å**: –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—Å –ø—Ä–æ–ø–æ–º `compare`)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞**: –û—á–∏—â–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫**: –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ–ø—Ä–æ—Å –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫
- **–ü–∞–∫–µ—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∞–º–∏

### ‚ö†Ô∏è **–°–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è**
- **–í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–µ—Ç—å**: –£—á–∏—Ç—ã–≤–∞–π—Ç–µ —á–∞—Å—Ç–æ—Ç—É –æ–ø—Ä–æ—Å–∞ –∏ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏**: –ß–∞—Å—Ç—ã–π –æ–ø—Ä–æ—Å –º–æ–∂–µ—Ç —Ä–∞–∑—Ä—è–∂–∞—Ç—å –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –æ–ø—Ä–æ—Å–∞ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é**: –î–æ–ª–≥–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∂–∏–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å—Å—è

```tsx
// –•–æ—Ä–æ—à–æ: –†–∞–∑—É–º–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–ø—Ä–æ—Å–∞
<Live source={getData} interval={5000}>
  {/* ... */}
</Live>

// –•–æ—Ä–æ—à–æ: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
<Live
  source={getData}
  compare={(prev, next) => prev.id !== next.id}
>
  {/* ... */}
</Live>

// –ò–∑–±–µ–≥–∞–π—Ç–µ: –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–π –æ–ø—Ä–æ—Å
<Live source={getData} interval={100}>
  {/* –≠—Ç–æ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç 10 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É! */}
</Live>
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –æ–ø—Ä–æ—Å–∞ (1-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `compare` –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ UI
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–¥–≤–∏–≥–æ–≤ –º–∞–∫–µ—Ç–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏ –∏ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### ‚ùå **–ò–∑–±–µ–≥–∞—Ç—å**
- –ß—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ —á–∞—Å—Ç–æ–≥–æ –æ–ø—Ä–æ—Å–∞ (< 500–º—Å) –±–µ–∑ –≤–µ—Å–∫–æ–π –ø—Ä–∏—á–∏–Ω—ã
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –æ—à–∏–±–æ–∫ –≤ UI
- –û–ø—Ä–æ—Å–∞, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –≤–∏–¥–µ–Ω (—Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ API –≤–∏–¥–∏–º–æ—Å—Ç–∏)
- –ë–æ–ª—å—à–∏—Ö –ø–æ–ª–µ–∑–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö Live –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –æ–ø—Ä–∞—à–∏–≤–∞—é—â–∏—Ö –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É

## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ò–∑ —Ä—É—á–Ω–æ–≥–æ –æ–ø—Ä–æ—Å–∞ —Å useEffect
```tsx
// –î–æ: –†—É—á–Ω–æ–π –æ–ø—Ä–æ—Å —Å useEffect
function DashboardWidget() {
  const [data, setData] = useState();
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() => {
    const interval = setInterval(async () => {
      setLoading(true);
      try {
        const result = await getData();
        setData(result);
        setError(null);
      }
 catch (err) {
        setError(err);
      }
 finally {
        setLoading(false);
      }
    }, 5000);

    return () => clearInterval(interval);
  }, []);

  return (
    <div>
      {loading && <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>}
      {error && (
<div>
–û—à–∏–±–∫–∞:
{error.message}
</div>
)}
      {data && <div>{JSON.stringify(data)}</div>}
    </div>
  );
}

// –ü–æ—Å–ª–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Live
function DashboardWidget() {
  return (
    <Live source={getData} interval={5000}>
      {({ value, isLoading, error }) => (
        <div>
          {isLoading && <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>}
          {error && (
<div>
–û—à–∏–±–∫–∞:
{error.message}
</div>
)}
          {value && <div>{JSON.stringify(value)}</div>}
        </div>
      )}
    </Live>
  );
}
```

### –ò–∑ WebSocket –∫ –æ–ø—Ä–æ—Å—É
```tsx
// –î–æ: WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
function LiveFeed() {
  const [data, setData] = useState();

  useEffect(() => {
    const ws = new WebSocket('/api/live-feed');
    ws.onmessage = (event) => {
      setData(JSON.parse(event.data));
    };

    return () => ws.close();
  }, []);

  return <div>{data?.message}</div>;
}

// –ü–æ—Å–ª–µ: Fallback –∫ –æ–ø—Ä–æ—Å—É –¥–ª—è –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
function LiveFeed() {
  return (
    <Live
      source={() => fetch('/api/live-feed').then(r => r.json())}
      interval={1000}
    >
      {({ value }) => <div>{value?.message}</div>}
    </Live>
  );
}
```

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **[`async`](../async/README.ru.md)** - –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **[`cache`](../cache/README.ru.md)** - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ–º–æ–∏–∑–∞—Ü–∏—è
- **[`track`](../track/README.ru.md)** - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

## –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Live` –Ω–µ–π—Ç—Ä–∞–ª–µ–Ω –∫ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏, –Ω–æ —É—á—Ç–∏—Ç–µ —ç—Ç–∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∫—Ä–∏–Ω-—Ä–∏–¥–µ—Ä–æ–≤
- –û–±—ä—è–≤–ª—è–π—Ç–µ –≤–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∂–∏–≤—ã–µ —Ä–µ–≥–∏–æ–Ω—ã
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –∂–∏–≤—ã–º –¥–∞–Ω–Ω—ã–º

```tsx
<Live source={getNotifications} interval={5000}>
  {({ value: notifications }) => (
    <div aria-live="polite" aria-label="–ñ–∏–≤—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
      {notifications?.map(notification => (
        <div key={notification.id} role="alert">
          {notification.message}
        </div>
      ))}
    </div>
  )}
</Live>;
```

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
```tsx
function CombinedDashboard() {
  return (
    <div className="dashboard">
      <Live source={() => fetch('/api/metrics')} interval={5000}>
        {({ value: metrics }) => (
          <MetricsWidget data={metrics} />
        )}
      </Live>

      <Live source={() => fetch('/api/alerts')} interval={3000}>
        {({ value: alerts }) => (
          <AlertsWidget data={alerts} />
        )}
      </Live>

      <Live source={() => fetch('/api/logs')} interval={2000}>
        {({ value: logs }) => (
          <LogsWidget data={logs} />
        )}
      </Live>
    </div>
  );
}
```

### –£—Å–ª–æ–≤–Ω—ã–π –æ–ø—Ä–æ—Å
```tsx
function ConditionalLive({ visible, priority }) {
  const interval = priority === 'high' ? 1000 : 5000;

  return (
    <Live
      source={getData}
      interval={interval}
      autoStart={visible}
    >
      {({ value, start, stop, isLive }) => (
        <div>
          {!visible && (
            <button onClick={start}>–ù–∞—á–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</button>
          )}
          {/* ... —Ä–µ–Ω–¥–µ—Ä –¥–∞–Ω–Ω—ã—Ö ... */}
        </div>
      )}
    </Live>
  );
}
```
