# Компонент Atom

Компонент `Atom` — это легкое и мощное решение для атомарного управления состоянием в React-приложениях. Он предоставляет изолированные, совместно используемые единицы состояния, доступные через компоненты без пробрасывания пропсов.

## Возможности

- **Атомарное управление состоянием**: Инкапсулирует логику состояния в изолированных единицах.
- **Глобальное хранилище**: Делится состоянием между компонентами с использованием уникальных ключей.
- **Система подписок**: Реактивно обновляет компоненты при изменении состояния.
- **Поддержка TypeScript**: Полностью типизированный API для безопасного и предсказуемого использования.

## API

### Пропсы

| Проп       | Тип                        | Обязательный | Описание                                      |
|------------|-----------------------------|--------------|--------------------------------------------------|
| `atomKey`  | `string`                    | ✅            | Уникальный идентификатор для атома в глобальном хранилище. |
| `initial`  | `T`                         | ✅            | Начальное значение для атома.                     |
| `children` | `(state: AtomState<T>) => ReactNode` | ✅            | Функция рендера, получающая состояние атома и действия.   |

### AtomState<T>

```typescript
interface AtomState<T = any> {
  value: T; // Текущее значение атома
  setValue: (value: T | ((prev: T) => T)) => void; // Обновить значение атома
  reset: () => void; // Сбросить атом к начальному значению
  subscribe: (callback: (value: T) => void) => () => void; // Подписаться на изменения
}
```

## Примеры

### Пример счетчика

```tsx
import { Atom } from 'ui-magic-core';

function Counter() {
  return (
    <Atom atomKey="counter" initial={0}>
      {({ value, setValue, reset }) => (
        <div>
          <p>Счет: {value}</p>
          <button onClick={() => setValue(prev => prev + 1)}>Увеличить</button>
          <button onClick={() => setValue(prev => prev - 1)}>Уменьшить</button>
          <button onClick={reset}>Сбросить</button>
        </div>
      )}
    </Atom>
  );
}
```

### Управление темой

```tsx
interface Theme {
  mode: 'light' | 'dark';
  primaryColor: string;
}

function ThemeProvider({ children }) {
  const defaultTheme: Theme = { mode: 'light', primaryColor: '#007bff' };

  return (
    <Atom atomKey="theme" initial={defaultTheme}>
      {({ value: theme, setValue: setTheme }) => (
        <div style={{ backgroundColor: theme.primaryColor }}>
          <button onClick={() => setTheme(prev => ({ ...prev, mode: prev.mode === 'light' ? 'dark' : 'light' }))}>
            Переключить тему
          </button>
          {children}
        </div>
      )}
    </Atom>
  );
}
```

## Лучшие практики

1. Используйте уникальные значения `atomKey`, чтобы избежать конфликтов.
2. Держите состояние атома сфокусированным и модульным.
3. Используйте TypeScript для типобезопасного управления состоянием.
4. Очищайте подписки, когда они больше не нужны.

## Советы по производительности

- Создавайте атомы для конкретных частей состояния.
- Избегайте частых обновлений для атомов верхнего уровня.
- Используйте мемоизацию для производных состояний или дорогих вычислений.
