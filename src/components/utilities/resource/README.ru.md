# –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Resource

–ú–æ—â–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –≤ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏, –æ—à–∏–±–∫–∏ –∏ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Feature-Sliced Design (FSD).

## –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç Resource –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫, –æ—Ç–º–µ–Ω–æ–π –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–∏—Å—Ç—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å render props –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π UI –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- üîÑ **–ó–∞–≥—Ä—É–∑–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API, –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ª—é–±—ã—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- üìä **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç—è–º–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –≤ FSD –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø—Ä–æ–¥—É–∫—Ç—ã, –∑–∞–∫–∞–∑—ã)
- üéØ **–î–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–π**: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –≤ —Å–ª–æ–µ features
- üß© **–î–∞–Ω–Ω—ã–µ –≤–∏–¥–∂–µ—Ç–æ–≤**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤–∏–¥–∂–µ—Ç–æ–≤
- üîç **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- üìÑ **–î–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü**: –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü
- üîÑ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏
- üö´ **–û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

- **–ü–∞—Ç—Ç–µ—Ä–Ω Render Props**: –ì–∏–±–∫–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞
- **–û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–î–∏–∑–∞–π–Ω –±–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ—á–∏—Å—Ç–∫–æ–π
- **–°–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –æ–±—â–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å TypeScript**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å –≥–µ–Ω–µ—Ä–∏—á–µ—Å–∫–∏–º–∏ —Ç–∏–ø–∞–º–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

## TypeScript —Ç–∏–ø—ã

```typescript
interface ResourceState<T, E = Error> {
  data: T | null
  error: E | null
  loading: boolean
  refetch: () => Promise<void>
}

interface ResourceProps<T, E = Error> {
  loader: () => Promise<T>
  initialData?: T
  immediate?: boolean
  deps?: unknown[]
  onError?: (error: E) => void
  onSuccess?: (data: T) => void
  children: RenderProp<ResourceState<T, E>>
}
```

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API

### –ü—Ä–æ–ø—Å—ã

| –ü—Ä–æ–ø | –¢–∏–ø | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------------|----------|
| `loader` | `() => Promise<T>` | –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è Promise –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–∞ |
| `initialData` | `T` | `null` | –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π |
| `immediate` | `boolean` | `true` | –ó–∞–≥—Ä—É–∂–∞—Ç—å –ª–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| `deps` | `unknown[]` | `[]` | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ |
| `onError` | `(error: E) => void` | - | –ö–æ–ª–±—ç–∫ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ |
| `onSuccess` | `(data: T) => void` | - | –ö–æ–ª–±—ç–∫ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö |
| `children` | `RenderProp<ResourceState<T, E>>` | –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –§—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –ø–æ–ª—É—á–∞—é—â–∞—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ |

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞

–§—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ children –ø–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç `ResourceState` —Å:

- `data`: –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ null
- `error`: –õ—é–±–∞—è –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∞—è –æ—à–∏–±–∫–∞ –∏–ª–∏ null
- `loading`: –ë—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ, —É–∫–∞–∑—ã–≤–∞—é—â–µ–µ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏ –∑–∞–ø—Ä–æ—Å
- `refetch`: –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–∞

## –ü—Ä–∏–º–µ—Ä—ã

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```tsx
interface User {
  id: number
  name: string
  email: string
}

function UserProfile({ userId }: { userId: number }) {
  return (
    <Resource<User> loader={() => fetchUser(userId)}>
      {({ data, loading, error, refetch }) => {
        if (loading && !data) return <UserSkeleton />
        if (error) return <ErrorMessage error={error} onRetry={refetch} />
        if (data) return <UserCard user={data} />
        return null
      }}
    </Resource>
  )
}
```

### –° –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

```tsx
function UserPosts({ userId, category }: { userId: number; category: string }) {
  return (
    <Resource<Post[]> 
      loader={() => fetchUserPosts(userId, category)}
      deps={[userId, category]}
    >
      {({ data, loading, error, refetch }) => (
        <div>
          {loading && <div className="spinner">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤...</div>}
          {error && <ErrorBanner error={error} onRetry={refetch} />}
          {data && <PostList posts={data} />}
        </div>
      )}
    </Resource>
  )
}
```

### –° –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

```tsx
function ProductDetails({ productId, cachedProduct }: Props) {
  return (
    <Resource<Product>
      loader={() => fetchProduct(productId)}
      initialData={cachedProduct}
      deps={[productId]}
    >
      {({ data, loading, error, refetch }) => (
        <div>
          {data && <ProductCard product={data} />}
          {loading && <div className="refresh-indicator">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...</div>}
          {error && <div className="error">–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å</div>}
        </div>
      )}
    </Resource>
  )
}
```

### –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

```tsx
function SearchResults() {
  const [query, setQuery] = useState('')
  
  return (
    <div>
      <SearchInput 
        value={query} 
        onChange={setQuery}
      />
      
      <Resource<SearchResult[]>
        loader={() => searchAPI(query)}
        immediate={false}
        deps={[query]}
      >
        {({ data, loading, error, refetch }) => (
          <div>
            <button onClick={refetch} disabled={loading || !query}>
              {loading ? '–ü–æ–∏—Å–∫...' : '–ù–∞–π—Ç–∏'}
            </button>
            
            {error && <ErrorMessage error={error} />}
            {data && <SearchResultList results={data} />}
          </div>
        )}
      </Resource>
    </div>
  )
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FSD –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

```tsx
// entities/user/api/userApi.ts
export const fetchUser = (id: number): Promise<User> => {
  return api.get(`/users/${id}`)
}

// features/user-profile/ui/UserProfile.tsx
export function UserProfile({ userId }: UserProfileProps) {
  return (
    <Resource<User>
      loader={() => fetchUser(userId)}
      deps={[userId]}
      onError={(error) => {
        analytics.track('user_profile_load_error', { userId, error: error.message })
      }}
    >
      {({ data, loading, error, refetch }) => {
        if (loading && !data) return <UserProfileSkeleton />
        if (error) return <UserProfileError error={error} onRetry={refetch} />
        if (data) return <UserProfileCard user={data} onRefresh={refetch} />
        return null
      }}
    </Resource>
  )
}

// widgets/user-dashboard/ui/UserDashboard.tsx
export function UserDashboard() {
  return (
    <div className="dashboard">
      <Resource<DashboardData>
        loader={() => fetchDashboardData()}
        onSuccess={(data) => {
          analytics.track('dashboard_loaded', { itemCount: data.items.length })
        }}
      >
        {({ data, loading, error, refetch }) => (
          <DashboardLayout>
            {loading && <DashboardSkeleton />}
            {error && <DashboardError error={error} onRetry={refetch} />}
            {data && <DashboardContent data={data} onRefresh={refetch} />}
          </DashboardLayout>
        )}
      </Resource>
    </div>
  )
}
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

```tsx
function RobustResourceLoader() {
  return (
    <Resource<ApiData>
      loader={async () => {
        const response = await fetch('/api/data')
        if (!response.ok) {
          throw new ApiError(response.status, response.statusText)
        }
        return response.json()
      }}
      onError={(error) => {
        if (error instanceof ApiError) {
          // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
          logger.error('API Error:', error.status, error.message)
        } else {
          // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
          logger.error('Network Error:', error.message)
        }
      }}
    >
      {({ data, loading, error, refetch }) => {
        if (loading) return <LoadingSpinner />
        
        if (error) {
          if (error instanceof ApiError && error.status === 404) {
            return <NotFoundMessage />
          }
          return <GenericError error={error} onRetry={refetch} />
        }
        
        return data ? <DataView data={data} /> : <EmptyState />
      }}
    </Resource>
  )
}
```

## –°–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ–Ω–∫–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- –û—á–∏—â–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- AbortController –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—á–∏—Å—Ç–∫—É

### –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```tsx
// –ú–µ–º–æ–∏–∑–∏—Ä—É–π—Ç–µ –¥–æ—Ä–æ–≥–∏–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∏
const memoizedLoader = useCallback(() => {
  return expensiveDataFetch(complexParams)
}, [complexParams])

<Resource loader={memoizedLoader}>
  {/* ... */}
</Resource>

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
const stableDeps = useMemo(() => [userId, filters], [userId, filters])

<Resource 
  loader={() => fetchData(userId, filters)}
  deps={stableDeps}
>
  {/* ... */}
</Resource>
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –î–µ–ª–∞–π—Ç–µ ‚úÖ

```tsx
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TypeScript –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
<Resource<User[]> loader={() => fetchUsers()}>
  {({ data }) => data && <UserList users={data} />}
</Resource>

// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
<Resource loader={loader}>
  {({ data, loading, error, refetch }) => {
    if (loading && !data) return <Skeleton />
    if (error) return <Error error={error} onRetry={refetch} />
    if (data) return <Content data={data} />
    return <EmptyState />
  }}
</Resource>

// –û–±–µ—Å–ø–µ—á–∏–≤–∞–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
<Resource 
  loader={loader}
  onError={(error) => {
    analytics.track('resource_error', { error: error.message })
    toast.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ')
  }}
>
  {/* ... */}
</Resource>
```

### –ù–µ –¥–µ–ª–∞–π—Ç–µ ‚ùå

```tsx
// –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—à–∏–±–æ–∫
<Resource loader={loader}>
  {({ data, loading }) => {
    if (loading) return <Spinner />
    return <Content data={data} /> // –ê —á—Ç–æ –µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞?
  }}
</Resource>

// –ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∞
<Resource loader={() => fetch('/api/data')}> // –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –∫–∞–∂–¥—ã–π —Ä–µ–Ω–¥–µ—Ä
  {/* ... */}
</Resource>

// –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
<Resource loader={loader}>
  {({ data, loading, error }) => {
    if (loading) return <Spinner />
    if (error) return <Error />
    return <Content data={data} /> // –ê —á—Ç–æ –µ—Å–ª–∏ data —Ä–∞–≤–Ω–æ null/–ø—É—Å—Ç–æ–µ?
  }}
</Resource>
```

## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –û—Ç useEffect + useState

```tsx
// –î–æ: –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
function UserProfile({ userId }) {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState(null)

  useEffect(() => {
    let cancelled = false
    setLoading(true)
    
    fetchUser(userId)
      .then(data => {
        if (!cancelled) {
          setUser(data)
          setError(null)
        }
      })
      .catch(err => {
        if (!cancelled) {
          setError(err)
        }
      })
      .finally(() => {
        if (!cancelled) {
          setLoading(false)
        }
      })

    return () => { cancelled = true }
  }, [userId])

  if (loading) return <Spinner />
  if (error) return <Error />
  return user ? <UserCard user={user} /> : null
}

// –ü–æ—Å–ª–µ: –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
function UserProfile({ userId }) {
  return (
    <Resource<User>
      loader={() => fetchUser(userId)}
      deps={[userId]}
    >
      {({ data, loading, error, refetch }) => {
        if (loading) return <Spinner />
        if (error) return <Error error={error} onRetry={refetch} />
        return data ? <UserCard user={data} /> : null
      }}
    </Resource>
  )
}
```

### –û—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ö—É–∫–æ–≤

```tsx
// –î–æ: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ö—É–∫
function useUser(userId) {
  const [state, setState] = useState({ data: null, loading: true, error: null })
  
  useEffect(() => {
    fetchUser(userId)
      .then(data => setState({ data, loading: false, error: null }))
      .catch(error => setState({ data: null, loading: false, error }))
  }, [userId])
  
  return state
}

// –ü–æ—Å–ª–µ: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Resource
function UserProfile({ userId }) {
  return (
    <Resource<User>
      loader={() => fetchUser(userId)}
      deps={[userId]}
    >
      {({ data, loading, error }) => {
        // –¢–∞ –∂–µ –ª–æ–≥–∏–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
      }}
    </Resource>
  )
}
```

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- [`cache`](../cache/README.ru.md) - –î–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- [`lazy`](../../performance/lazy/README.ru.md) - –î–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏
- [`compose`](../compose/README.ru.md) - –î–ª—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤
- [`debug`](../debug/README.ru.md) - –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤

## –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç Resource –Ω–µ–π—Ç—Ä–∞–ª–µ–Ω –∫ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç UI —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–ø—Ä—è–º—É—é. –û–¥–Ω–∞–∫–æ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:

### –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
```tsx
<Resource loader={loader}>
  {({ loading, data, error }) => {
    if (loading) {
      return (
        <div 
          role="status" 
          aria-live="polite"
          aria-label="–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞"
        >
          <Spinner />
          <span className="sr-only">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
      )
    }
    // ... –¥—Ä—É–≥–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  }}
</Resource>
```

### –°–æ—Å—Ç–æ—è–Ω–∏—è –æ—à–∏–±–æ–∫
```tsx
<Resource loader={loader}>
  {({ error, refetch }) => {
    if (error) {
      return (
        <div role="alert" aria-live="assertive">
          <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç: {error.message}</p>
          <button onClick={refetch}>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
      )
    }
    // ... –¥—Ä—É–≥–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  }}
</Resource>
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

```tsx
function AnalyticsResource<T>({ resourceName, ...props }: Props & { resourceName: string }) {
  return (
    <Resource<T>
      {...props}
      onSuccess={(data) => {
        analytics.track('resource_loaded', {
          resource: resourceName,
          size: Array.isArray(data) ? data.length : 1
        })
        props.onSuccess?.(data)
      }}
      onError={(error) => {
        analytics.track('resource_error', {
          resource: resourceName,
          error: error.message
        })
        props.onError?.(error)
      }}
    >
      {props.children}
    </Resource>
  )
}
```